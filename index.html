<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>Pablo</title>
        <script src="pablo.js"></script>
    </head>
    <body>
        <h1><a href="https://github.com/dharmafly/pablo">Pablo</a></h1>
        
        <!-- HTML container for the SVG root node -->
        <label for="scale">scale: </label>
        <input id="scale" type="range" min="0.125" max="3" step="0.05" value="1">
        <div id="paper"></div>
        
        <script>
        // Check browser supports Pablo
        if (pablo.isSupported){
            
            // Create SVG root node
            var paper = pablo.root('#paper', {width:460, height:460})
            
                // CSS styles, sandboxed to the SVG context
                .styles([
                    '* {stroke-width:20}',
                    'text {font-family:sans-serif; font-size:16px}'
                ])
                
                // Graphical elements
                ('line', {x1:10, y1:5, x2:200, y2:350, stroke:'purple'})
                ('circle', {cx:200, cy:150, r:50, fill:'#f33', stroke:'#050'})
                ('ellipse', {
                    cx:200,
                    cy:270,
                    rx:80,
                    ry:40,
                    stroke:'#222',
                    fill:'#777',
                    opacity:0.5,
                    style:'stroke-width:10'
                })
                ('polyline', {
                    points:'120,100 200,25 280,100',
                    stroke:'#444',
                    fill:'none', 
                    'stroke-linejoin':'round',
                    'stroke-linecap':'round'
                })
                
                
                // Text on a path
                (
                    pablo.defs()
                    ('path', {
                        id:'squiggle',
                        transform:'rotate(-90 300 170)',
                        d:'M 20 320 C 120 220 220 120 320 220 C 420 320 520 420 620 320'
                    })
                )
                (
                    pablo.text()
                    ('textPath', {
                        _content:'★ In Xanadu, did Kublah Khan a stately pleasuredome decree…',
                        _link:'#squiggle',
                        fill:'#997099'
                    })
                )
                
                
                // Hyperlinked text
                (
                    pablo.a({
                        target:'_blank',
                        _link:'https://github.com/dharmafly/pablo'
                    })
                    ('text', {
                        _content:'we ♥ pablo',
                        x:300,
                        y:170,
                        fill:'#777',
                        transform:'rotate(-45 300 170)'
                    })
                );
                
                
                // Animate red circle on mouse events
                paper('circle')[0]
                    .attr({style:'cursor:pointer'})
                    .on('mouseover', function(event){
                        pablo(event.target)
                            .empty()
                            ('animate', {
                                attributeName:'fill',
                                from:'#ff3',
                                to:'#005',
                                dur:'1.62s',
                                repeatCount:'indefinite'
                            })
                            ('animate', {
                                attributeName:'r',
                                from:45,
                                to:60,
                                dur:'6s',
                                repeatCount:'indefinite'
                            })
                    })
                    .on('mouseout', function(event){
                        pablo(event.target).empty();
                    })
                    .on('mousedown', function(event){
                        pablo(event.target).attr({stroke:'#fff'});
                    })
                    .on('mouseup', function(event){
                        pablo(event.target).attr({stroke:'#050'});
                    });
                    

                // Animated pattern - prepended background circle
                paper
                (
                    pablo.defs()
                    (
                        pablo('pattern', {
                            id: 'triangle',
                            width:10,
                            height:10,
                            patternUnits: 'userSpaceOnUse'
                        })
                        (
                            pablo('polygon', {
                                points:'5,0 10,10 0,10',
                                fill:'#bdd'
                            })
                            ('animateTransform', {
                                attributeName:'transform',
                                type:'rotate',
                                from:'0 10 10',
                                to:'360 10 10',
                                dur:'16.2s',
                                repeatCount:'indefinite'
                            })
                        )
                    )
                )
                // With prepend, this will be rendered underneath other elements
                .prepend(
                    pablo.circle({
                        cx:10,
                        cy:10,
                        r:250,
                        fill:'url(#triangle)'
                    })
                    ('animate', {
                        attributeName:'opacity',
                        from:0,
                        to:1,
                        dur:'16.2s',
                        repeatCount:1
                    })
                    ('animateTransform', {
                        attributeName:'transform',
                        type:'rotate',
                        from:'0 7.5 7.5',
                        to:'360 7.5 7.5',
                        dur:'618s',
                        repeatCount:'indefinite'
                    })
                );
                
                // Scale range slider
                var scaleRange = document.getElementById('scale');
                scaleRange.addEventListener('change', function(){
                    paper.css({
                        'transform':'scale(' + scaleRange.value + ')',
                        'transform-origin':'0 0',
                        '-webkit-transform':'scale(' + scaleRange.value + ')',
                        '-webkit-transform-origin':'0 0',
                        '-moz-transform':'scale(' + scaleRange.value + ')',
                        '-moz-transform-origin':'0 0',
                        '-ms-transform':'scale(' + scaleRange.value + ')',
                        '-ms-transform-origin':'0 0',
                        '-o-transform':'scale(' + scaleRange.value + ')',
                        '-o-transform-origin':'0 0'
                    });
                }, false);
        }
        </script>
    </body>
</html>